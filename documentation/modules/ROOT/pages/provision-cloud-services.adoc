:icons: font
:imagesdir: ../assets/images
= Provision Red Hat application services

== Goals of this lab

Globex decides to use Red Hat OpenShift API Management which is a fully Red Hat managed API traffic control and API program management solution that includes analytics, access control, developer workflows, and more. 

The API lifecycle tools such as API Designer and Service Registry provide a streamlined developer experience to design and manage API specifications and schemas, and manage and secure APIs for internal and external teams.

In this workshop, you will use the Red Hat OpenShift API Management Developer Sandbox, which is a trial environment for RHOAM, which provides you with a free 30-day trial environment allowing you to explore the benefits of the API management platform.

In this section of the lab, you will 

* Register for Red Hat OpenShift API Management Developer Sandbox
* Provision a Service Registry instance to host the API schemas


== Register for a Developer sandbox for Red Hat OpenShift API Management (RHOAM)

. Register for a RHOAM sandbox by clicking on the red *Launch your RHOAM OpenShift Developer Sandbox* button on the https://red.ht/rhoam-sandbox[Developer Sandbox use case activities page,role=external,window=_blank]. 
. You are redirected to *Update Your Account* page. 
+
image::rhoam-update-account.png[]
* Update the details
*** Account Type: Personal
*** Provide your password again and enter other details
. Click Submit 

. You are redirected back to the Developer Sandbox use case activities page. To prevent the creation of fraudulent accounts, your sandbox account needs to be validated with a phone verification step.
+
image::rhoam-sandbox-phone-verification.png[]

. Once you enter the code received on your phone, your RHOAM sandbox will be ready to use. Click the *Start using your RHOAM sandbox* button.
. You are redirected to the Developer Sandbox login screen. Click the *DevSandbox* button to log into your OpenShift Sandbox.
+
image::rhoam-sandbox-login.png[]
. If this is the first time you use the Red Hat account on the Developer Sandbox, you are redirected to a Terms and Conditions page. Check the *I have read and agree to all the terms and conditions below* check box. Feel free to uncheck the *I would like to receive...* check boxes if you want to opt out from receiving marketing emails. Click *Submit*.
. An *OpenShift API Management tenant* has been preprovisioned for you within the *<username>-dev* namespace.
** Note: The pre-provisioning process may take a few minutes.
. To launch OpenShift API Management, select *Project* from the menu on the left, and in the *Launcher* pane on the right side, select *API Management*.
+
[NOTE]
====
If you donâ€™t see the link yet, please allow a few minutes before refreshing the page to access OpenShift API Management. Creation of this tenant takes a few minutes.
====

+
image::launcher-pane.png[width=100%]
. Choose to *Authenticate through <> Red Hat Single Sign-On*, and  login using the identity provider that applies to you, e.g *DevSandbox*.
+
image::sso-login.png[width=100%] 
image::devsandbox-login.png[width=100%] 
. You are redirected to the Dashboard of your RHOAM tenant. Leave the browser tab open, as you will have to come back to it later in the workshop.
+
image::rhoam-sandbox-tenant-dashboard.png[]

== Provision a Service Registry instance

In this step you provision a Service Registry trial instance on the Red Hat Hybrid Cloud Console. The Service Registry instance will be used in this workshop to store OpenAPI spec documents.

. Navigate to https://console.redhat.com/beta/application-services/service-registry[Service Registry,role=external,window=service-registry]. You may need to log in with your Red Hat account credentials if prompted.
+
[NOTE]
====
If you created a new Red Hat account as explained in the previous section, you should already be logged in into the Hybrid Cloud Console.
You will need to accept another set of terms and conditions in order to create a Service Registry instance.
====
. Click on *Create  Service Registry* instance
+
image::create-osr.png[width=60%]
. You will be asked to sign up for Terms and Conditions.
** Click on *View Terms and Conditions* button
+
image::osr-tnc.png[]
. Click on *I have read and agree to the terms.* and click on *Submit*
+
image::osr-agree-tnc.png[]
. You will be navigated back to the Hybrid Console Page. 
//https://console.redhat.com/beta/application-services/service-registry?create=true&decision-1524=accepted&ackID=6072032079
** Due to a known issue, this page would keep loading. So please close this browser tab if it allows you to. 
. In a new browser tab, navigate to https://console.redhat.com/beta/application-services/service-registry[Service Registry,role=external,window=service-registry-new]. 
. On the *Service Registry Instances* overview page, click the *Create Service Registry instance* button. Enter `globex` as the name of the instance and click *Create*. This starts the provisioning process for your Service Registry instance.

. The new Service Registry instance is listed in the instances table. After a couple of seconds, your instance should be marked as ready. 
+
image::console-redhat-com-service-registry-instance-ready.png[]

Leave the browser tab open, as you will have to come back to it later in the workshop.
